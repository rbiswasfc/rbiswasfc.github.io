<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.55.6" />

    
    
    

<title>A bottom-up recommender System for travel destinations • Raja Biswas</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="A bottom-up recommender System for travel destinations"/>
<meta name="twitter:description" content="&ndash; Project Status: Active Objective To develop a web based platform that gives personalized recommendations for travel destinations and activities based on user preferences. The recommendations will be accompanied with a list of directly comparable features pertaining to the suggested destinations, such that the user(s) can delve deeper and emerge with a satisfied choice.
To this end, a bottom-up solution algorithm is adopted:
 At the top level, a list of countries are considered Each country contains a list of travel destinations Each destination contains a list of Points Of Interest (POI)  We will predict the scores of the POIs based on user profile."/>

<meta property="og:title" content="A bottom-up recommender System for travel destinations" />
<meta property="og:description" content="&ndash; Project Status: Active Objective To develop a web based platform that gives personalized recommendations for travel destinations and activities based on user preferences. The recommendations will be accompanied with a list of directly comparable features pertaining to the suggested destinations, such that the user(s) can delve deeper and emerge with a satisfied choice.
To this end, a bottom-up solution algorithm is adopted:
 At the top level, a list of countries are considered Each country contains a list of travel destinations Each destination contains a list of Points Of Interest (POI)  We will predict the scores of the POIs based on user profile." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://rbiswasfc.github.io/posts/projects/deepfly/" />
<meta property="article:published_time" content="2019-08-03T21:11:12&#43;08:00"/>
<meta property="article:modified_time" content="2019-08-03T21:11:12&#43;08:00"/><meta property="og:site_name" content="IMbbb" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.ac3a619747f8665862556109286bbbf57d265383ea2965b9c8c4c756e0c13143.css" integrity="sha256-rDphl0f4ZlhiVWEJKGu79X0mU4PqKWW5yMTHVuDBMUM=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://rbiswasfc.github.io/">Raja Biswas</a>
      </span>
      
        
        
        
        <div class="author-image">
          <img src="https://rbiswasfc.github.io/img/raja_profile.JPG" alt="Author Image" class="img--circle img--headshot element--center">
        </div>
        
      
      
      <p class="site__description">
        
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Raja Biswas</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/about/">
						<span>About</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://github.com/rbiswasfc" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://linkedin.com/in/raja-biswas" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://instagram.com/_rbiswas" rel="me"><i class="fab fa-instagram fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://twitter.com/raja_biswas" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	


	
	
	
	
	
	
	
</section>

      </div>
    </div>
    

<div class="builtwith">
Built with <a href="https://gohugo.io">Hugo</a> ❤️ <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
</div>


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>A bottom-up recommender System for travel destinations</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Aug 3, 2019
    
    
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/data-science">data science</a>
           
      
          <a class="badge badge-tag" href="/tags/deep-learning">deep learning</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 7 min read
</div>


  </header>
  
  
  <div class="post">
    

<h4 id="project-status-active">&ndash; Project Status: Active</h4>

<h2 id="objective">Objective</h2>

<p>To develop a web based platform that gives personalized recommendations for travel destinations and activities based on user preferences. The recommendations will be accompanied with a list of directly comparable features pertaining to the suggested destinations, such that the user(s) can delve deeper and emerge with a satisfied choice.</p>

<p>To this end, a bottom-up solution algorithm is adopted:</p>

<ul>
<li>At the top level, a list of countries are considered</li>
<li>Each country contains a list of travel destinations</li>
<li>Each destination contains a list of Points Of Interest (POI)</li>
</ul>

<p><img src="/img/RECM/bottom_up_sys_rec.PNG" alt="BottomUP" /></p>

<p>We will predict the scores of the POIs based on user profile. Next, these scores will be aggregated to give a net score for all travel destinations. The top N destinations will be recommended to the    user. The similar steps can we followed, to suggest countries that a user may be interested in.</p>

<p>This is an end-to-end data science project, spanning all stages such as data collection, data exploration, data cleaning, feature extraction, model development, model validation and data visualization.</p>

<p><img src="/img/RECM/pipeline.PNG" alt="Pipeline" /></p>

<p>These stages are briefly summarized in the following.</p>

<h2 id="data-collection">Data collection</h2>

<p>The objective is to build a dataset containing information of tourist destinations around the globe. After browsing through several travel sites, I decided to collect data from Triposo and TripAdvisor, since they offer comprehensive details and user reviews regarding tourist attractions.</p>

<h3 id="triposo-https-github-com-rbiswasfc-recommender-system-blob-master-scraping-scrape-triposo-ipynb"><a href="https://github.com/rbiswasfc/Recommender-System/blob/master/scraping/scrape_triposo.ipynb">Triposo</a></h3>

<p>Details of 250k Points Of Interest (POI) are collected from Triposo. The following attributes of each POI are stored:</p>

<ul>
<li>Title: Name of POI</li>
<li>Location: Which location/city the POI belongs to</li>
<li>Country: country &ndash;&gt; location &ndash;&gt; POI</li>
<li>POI type: e.g. museum, lake, mountain, church</li>
<li>POI info: a short description of the POI</li>
<li>POI image: cover image of the POI</li>
<li>POI rank: Index of the POI withing the POI list for a location</li>
</ul>

<p>This <a href="https://github.com/rbiswasfc/Recommender-System/blob/master/scraping/scrape_triposo.ipynb">jupyter notebook</a> contains details of the data collection steps:</p>

<ul>
<li>Make a list of countries to include in the dataset</li>
<li>For each country find the urls of travel destinations</li>
<li>For each travel destination extract details of POIs</li>
</ul>

<p><img src="/img/RECM/location_triposo.PNG" alt="Scrape Location" /></p>

<p><img src="/img/RECM/POI_triposo.PNG" alt="Scrape POI" /></p>

<h3 id="tripadvisor-https-github-com-rbiswasfc-recommender-system-blob-master-scraping-scrape-data-with-apify-ipynb"><a href="https://github.com/rbiswasfc/Recommender-System/blob/master/scraping/scrape_data_with_apify.ipynb">TripAdvisor</a></h3>

<p>The collaborative filtering mechanism utilizes underlying user-item interaction for making recommendations. In this case, the users and items are travelers and tourist attractions respectively. To build a user-item matrix, information from the TripAdvisor are scraped. The <a href="https://apify.com/petrpatek/tripadvisor-scraper">APIFY TripAdvisor scraper</a> offers a ready-made and fast crawler to get the relevant information. Using APIFY, reviews of many tourist attractions in south-east Asia and Europe are extracted. Two separate tables are created: TA_attractions and TA_reviews.</p>

<h4 id="ta-attractions">TA_attractions</h4>

<p>The table TA_attractions stores the following information for each attraction:</p>

<ul>
<li>location_id: unique id for an attraction</li>
<li>name: name of the attraction</li>
<li>latitude and longitude: geographical coordinates</li>
<li>description: a short description of the attraction</li>
<li>web_url: url of the page</li>
<li>subcategory: type of attraction</li>
<li>subtype: more refined class of subcategory</li>
<li>num_reviews: total number of reviews for an attraction</li>
</ul>

<p><img src="/img/RECM/TA_attraction.PNG" alt="Scrape TA Location" /></p>

<h4 id="ta-reviews">TA_reviews</h4>

<p>The reviews tables stores all scraped reviews with the following fields:</p>

<ul>
<li>user: TA user name of the reviewer</li>
<li>location_id: the unique id of the rated location</li>
<li>location_name: name of the location</li>
<li>rating: given rating for the attraction (1 to 5 stars)</li>
<li>comment: the text content of the review</li>
</ul>

<p><img src="/img/RECM/TA_reviews.PNG" alt="Scrape TA Location" /></p>

<h4 id="create-poi-database">Create POI database</h4>

<p>The extracted data is finally stored in MySQL database. The relationship schema is shown below:</p>

<p><img src="/img/RECM/poi_db.PNG" alt="Scrape POI" /></p>

<h5 id="to-be-updated-ta-user-table-not-implemented">&ndash; to be updated: TA User table not implemented</h5>

<h2 id="data-exploration-https-github-com-rbiswasfc-recommender-system-blob-master-notebooks-eda-ipynb"><a href="https://github.com/rbiswasfc/Recommender-System/blob/master/notebooks/EDA.ipynb">Data exploration</a></h2>

<p>The notebook for data exploration can be accessed <a href="https://github.com/rbiswasfc/Recommender-System/blob/master/notebooks/EDA.ipynb">here</a>.</p>

<h3 id="triposo-eda">Triposo EDA</h3>

<p>Information regarding  230k+ travel attractions (POI) are extracted. A sample of 5 POIs is shown below:</p>

<p><img src="/img/RECM/sample_triposo_data.PNG" alt="POI sample" /></p>

<p>Each POI is attributed to a POI type e.g. lake, mountain and sight. The top 15 POI type with respect to their frequency are:</p>

<table>
<thead>
<tr>
<th align="center">POI Type</th>
<th align="center">Frequency</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">sight</td>
<td align="center">46675</td>
</tr>

<tr>
<td align="center">museum</td>
<td align="center">38720</td>
</tr>

<tr>
<td align="center">park</td>
<td align="center">28234</td>
</tr>

<tr>
<td align="center">church</td>
<td align="center">19405</td>
</tr>

<tr>
<td align="center">mountain</td>
<td align="center">8556</td>
</tr>

<tr>
<td align="center">memorial</td>
<td align="center">8493</td>
</tr>

<tr>
<td align="center">theater</td>
<td align="center">6235</td>
</tr>

<tr>
<td align="center">bridge</td>
<td align="center">5972</td>
</tr>

<tr>
<td align="center">city hall</td>
<td align="center">5286</td>
</tr>

<tr>
<td align="center">castle</td>
<td align="center">5235</td>
</tr>

<tr>
<td align="center">library</td>
<td align="center">5209</td>
</tr>

<tr>
<td align="center">temple</td>
<td align="center">3863</td>
</tr>

<tr>
<td align="center">lake</td>
<td align="center">3008</td>
</tr>

<tr>
<td align="center">tower</td>
<td align="center">2592</td>
</tr>

<tr>
<td align="center">university</td>
<td align="center">2533</td>
</tr>
</tbody>
</table>

<p>For each POI, a short explanatory description is scraped. The word count distribution of the descriptions are:</p>

<p><img src="/img/RECM/word_count_poi.PNG" alt="Word count hist" /></p>

<p>Histogram plot for number of words in text description of POIs</p>

<p>Cluster analysis is next performed to identify patterns among the POIs. To this end, the TF-iDF features computed from the POI text descriptions are used. To find the optimum number of clusters, the elbow method is adopted.</p>

<p><img src="/img/RECM/clustering_elbow.PNG" alt="cluster elbow" /></p>

<p>Subsequently, POIs are grouped into 12 clusters. The most frequent words in the top 4 clusters are shown in the following.</p>

<h4 id="cluster-1">Cluster 1</h4>

<p><img src="/img/RECM/cluster_1.PNG" alt="cluster1" /></p>

<h4 id="cluster-2">Cluster 2</h4>

<p><img src="/img/RECM/cluster_2.PNG" alt="cluster1" /></p>

<h4 id="cluster-3">Cluster 3</h4>

<p><img src="/img/RECM/cluster_3.PNG" alt="cluster1" /></p>

<h4 id="cluster-4">Cluster 4</h4>

<p><img src="/img/RECM/cluster_4.PNG" alt="cluster1" /></p>

<p>Evidently, each cluster captures different POI types. For example, in cluster 1 and 2, the dominant POI types are waterfall and castle respectively.</p>

<h3 id="tripadvisor-ta">TripAdvisor (TA)</h3>

<p>The purpose of scraping information from TripAdvisor is to create user-attraction matrix. It is thus important to have multiple reviews from each user in the dataset. A histogram plot for number of reviews per user is shown below:</p>

<p><img src="/img/RECM/user_review_comment_dist.PNG" alt="user rating frequency" /></p>

<p>As observed, 53k+ users have at least 5 reviews. A total of 436k+ reviews are considered from these users.</p>

<h5 id="sample-from-ta-reviews-table">Sample from TA_reviews table</h5>

<p><img src="/img/RECM/sample_ratings.PNG" alt="Rating Sample" /></p>

<h5 id="reviews-from-a-specific-user">Reviews from a specific user</h5>

<p><img src="/img/RECM/ratings_one_user_TA.PNG" alt="One user ratings" /></p>

<p>The rating distribution is next explored. Each review rates an attraction from 1 to 5. The histogram for rating distribution is shown below:</p>

<p><img src="/img/RECM/TA_ratings_hist.PNG" alt="Rating Dist" /></p>

<p>A non-uniform rating distribution is apparent from the above plot. The average and standard deviation is computed to be 4.37 and 0.89 respectively.</p>

<h2 id="data-cleaning">Data cleaning</h2>

<p>Although the information extracted from Triposo and TripAdvisor are well structured the most part, a few issues needed to be fixed before model development:</p>

<ul>
<li>POIs (Triposo) for which the description has less than 4 words are dropped</li>
<li>For POI description leading and trailing &lsquo;\n&rsquo; character is removed</li>
<li>Reviews from users (TripAdvisor) with less 5 reviews are dropped</li>
<li>Attractions (tripAdvisor) with less than 5 reviews are removed</li>
</ul>

<h2 id="feature-extraction-https-github-com-rbiswasfc-recommender-system-blob-master-notebooks-feature-extraction-ipynb"><a href="https://github.com/rbiswasfc/Recommender-System/blob/master/notebooks/Feature_extraction.ipynb">Feature extraction</a></h2>

<h3 id="tf-idf">TF-iDF</h3>

<p>After data cleaning, a total of 230625 POIs are considered for further analyses. For each of these POIs, a 5000 dimensional feature vector is computed using TF-iDF approach. The TF-iDF matrix shape is thus (230625, 5000). TF-iDF (term frequency-inverse document frequency) is a numerical statistic that is intended to reflect how important a word is to a document. Inverse document frequency term is used to bring down importance of words that appear in many documents.</p>

<h3 id="universal-sentence-encoder">Universal Sentence Encoder</h3>

<p>The Universal Sentence Encoder (by Google) converts any sentence into a meaningful vector.</p>

<p><img src="/img/RECM/use_google.png" alt="USE" /></p>

<p>The sentence encoder is built based on the Deep Average Network (DAN) architecture. It is pre-trained on a large corpus and can be used in a variety of tasks such as sentimental analysis, classification and so on. POI descriptions from Triposo are passed through the universal sentence encoder network to get a 512-dimensional vector representation for each POI. Note that, these 512 dimensional vectors are able to capture the underlying context sensitive semantic information, which is lacking in simple count based TF-iDF method.</p>

<h3 id="image-features">Image features</h3>

<p>POIs for which a cover image is available, additional image based feature can be extracted using a pre-trained convNet architecture such as ResNet, Inception Network or EfficientNet. This step is under progress.</p>

<h3 id="user-attraction-interaction-matrix">User-attraction interaction matrix</h3>

<p>The collaborative filtering mechanism leverages information from the item-attraction matrix. This interaction matrix can be created by joining the TA_reviews and TA_attractions table. (to be completed soon &hellip;)</p>

<h2 id="recommender-system">Recommender system</h2>

<h4 id="content-based-recommender-system-https-github-com-rbiswasfc-recommender-system-blob-master-notebooks-rec-sys-deepfly-ipynb"><a href="https://github.com/rbiswasfc/Recommender-System/blob/master/notebooks/rec-sys-deepfly.ipynb">Content-based recommender system</a></h4>

<p>The notebook for developing the content-based recommender system is summarized <a href="https://github.com/rbiswasfc/Recommender-System/blob/master/notebooks/rec-sys-deepfly.ipynb">here</a>. At the outset, the user will be presented with a list of POIs, along with their description and image. The user will next be requested to rate these POIs. A vector representation of the user profile will be computed based on the ratings.</p>

<h5 id="user-inputs">User inputs</h5>

<p><img src="/img/RECMrating_inp_1.PNG" alt="Input 1" /></p>

<p><img src="/img/RECM/rating_inp_2.PNG" alt="Input 2" /></p>

<p><img src="/img/RECM/rating_inp_3.PNG" alt="Input 3" /></p>

<p><img src="/img/RECM/rating_inp_4.PNG" alt="Input 4" /></p>

<p><img src="/img/RECM/rating_inp_5.PNG" alt="Input 5" /></p>

<h4 id="scoring">Scoring</h4>

<p>Once the user profile vector is obtained, the score of all other POIs are computed based on cosine similarity. Next, POI scores are combined to get a net score for each travel destination:</p>

<p><img src="/img/RECM/scoring_deepfly.PNG" alt="Scoring" /></p>

<h4 id="predictions">Predictions</h4>

<p>The top 10 recommendations are shown to the user:</p>

<p><img src="/img/RECM/rec_deepfly.PNG" alt="Sys Rec DeepFLY" /></p>

<p><img src="/img/RECM/rec_deepfly_part_1.PNG" alt="Sys Rec 1" /></p>

<p><img src="/img/RECM/rec_deepfly_part_2.PNG" alt="Sys Rec 2" /></p>

<h4 id="wikivoyage">WikiVoyage</h4>

<p>To compare the performance of hierarchical travel recommender system with traditional systems, I have built another content-based recommender system using the wiki-travel database. The notebooks describing the implementation can be found <a href="https://github.com/rbiswasfc/Recommender-System/blob/master/notebooks/wikiVoyageRecSys.ipynb">here</a>.</p>

<h5 id="to-do-compare-bottom-up-approach-with-one-scale-approach">To-do: compare bottom-up approach with one-scale approach</h5>

<h5 id="collaborative-filtering">Collaborative filtering</h5>

<ul>
<li>Get user profile in terms of latent variable</li>
</ul>

<h2 id="model-deployment-and-monitoring">Model deployment and monitoring</h2>

<ul>
<li>To-do: develop a web application and track the model performance</li>
<li>To-do: adjust model parameters with user feedback (conduct a survey with web application)</li>
</ul>

<h5 id="upcoming-features">Upcoming features</h5>

<ul>
<li>User constraints e.g. a particular country</li>
<li>Integration of flight and hotel information</li>
</ul>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/tutorial/gce/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Japan</span>
    </a>
    
    
</div>


  

  
    


</article>


        </div>
        
    

<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
